# プロジェクト概要

このプロジェクトでは、 Claude, Codex, Gemini の3つのAIが共同でブラウザゲームを開発するものです。
各AIへの指示は「README.md を読んで進めてください」だけとします。

# 開発ルール

Claude → Codex → Gemini → Claude → ... の順で開発を進めます。指示者（人間）が順番に指示をしていきます。
各AIは自分の番が来たら、README.md とコミットログを読んで、開発を進めてください。
他のAIが編集している可能性があるので、必ず最新のファイルを読み直してください。

開発内容や仕様は都度、 README.md に記載してください。時系列ではなく、現状をまとめ直す形でお願いします。
次につくるものなどはコミットメッセージでやりとりしてください。

いきなり作り出さず、後述の「作るもの」「作り方」を読み、何を作るか、どう作るかの議論をし、3者のAIが納得したら開発を始めてください。
それまではREADEME.md の編集だけを行ってください。

# コミット

Git でリポジトリ管理をしています。コミットログは以下のフォーマットで書いてください。

```
<AI名>: <変更内容の要約>
<前のコミットへの感想>
<次のAIへの指示>
```

例：
```
Claude: 自機の移動部分を作成
Codexの実装は素晴らしいです。
次は美術面を強化してください。
```

コミットの粒度はなるべく小さく、1つのコミットで1つの機能を追加するようにしてください。
機能が完成しなくても次のAIに引き継いでもよいですが、自分のターンの終わりは必ずコミットして終わってください。

# 作るもの

ブラウザ上で動くゲームです。アクション性を要求するもので、ジャンルは自由です。
何を作るかも3者のAIで議論のうえ進めてください。

## Claude の提案
- **ゲームジャンル**: 2Dシューティングゲーム（縦スクロール）
- **理由**: アクション性があり、実装しやすく、3つのAIが順番に機能を追加しやすい
- **基本機能**:
  - プレイヤー機体の移動（キーボード操作）
  - 敵の出現・移動・攻撃
  - 弾の発射・当たり判定
  - スコアシステム
  - ゲームオーバー・リスタート機能

他のAIの意見をお聞かせください。

## Codex の検討
- Claude案に賛成。縦スクロールシューティングなら段階的に機能追加しやすく、アクション要件も満たせる。
- 最初の1サイクルではプレイヤー移動・単純な敵出現・弾発射までを目標に設定し、以降で難易度調整や演出を積み上げたい。
- Geminiには敵パターンやUI演出の拡張案があれば共有してほしい。

議論の結果、作るものに納得したら自分の行をチェックしてください。3者が納得してから開発を始めてください。

- [x] Claude
- [x] Codex
- [x] Gemini


# 作り方

Web技術で作り、ブラウザで index.html を開くだけで遊べる状態にしてください。
具体的にどのような言語、ライブラリ、フレームワークで作るかは、3者のAIで議論のうえ決めてください。

## Claude の提案
- **基本技術**: HTML5 Canvas + JavaScript（Vanilla JS）
- **理由**:
  - 軽量で追加ライブラリ不要
  - ブラウザで直接実行可能
  - 3つのAIが順番に機能追加しやすい
- **ファイル構成**:
  - `index.html` - メインHTML
  - `game.js` - ゲームロジック
  - `style.css` - スタイル
- **開発方針**: 最小限の構成から始めて段階的に機能追加

他のAIの意見をお聞かせください。

## Codex の検討
- Canvas + Vanilla JS構成で問題なし。外部依存を避けつつ柔軟にロジックを分担できる。
- 初期段階では簡易的なゲームループと描画ユーティリティを`game.js`で用意し、後続のAIが機能を差し込みやすい構造を目指したい。
- GeminiにUIフレームや音響面のアイデアがあれば歓迎。

議論の結果、作り方に納得したら自分の行をチェックしてください。3者が納得してから開発を始めてください。

- [x] Claude
- [x] Codex
- [x] Gemini

# 仕様など

## 現在の仕様メモ（2025-09-22）
- プレイヤー: 矢印キーで移動。初期ライフ3、被弾でライフ-1＋1.5秒の無敵。`P`でポーズ可能。
- 武装: 通常弾は`Space`で発射（200ms）。パワーアップで連射強化、シールド、レーザー（貫通3ヒット）、ホーミングミサイル（誘導＆範囲爆発）が一定時間有効。
- 敵: 通常・ジグザグ・円弧（アーク）・追尾弾を放つトラッカー・3ウェーブ毎の中ボス。経過時間とスコアで出現頻度・速度・種類が段階的に変化。
- ウェーブ/ボス: 8体ごとのウェーブ制＋3秒ブレイク。3ウェーブ毎に耐久5のボスが登場し、3方向弾を連射。ウェーブ状況とカウントダウンをHUD表示。
- 最終ボス（9ウェーブ目）: 体力20、5方向弾幕＋ホーミングミサイル、12角形の特別デザイン。撃破後エンドレスモードへ移行。
- エンドレスモード: 9ウェーブ以降は無限続行。難易度とボス体力が段階的に増加し、HUDに専用表示。
- パワーアップ: ドロップ率25%（ボスは確定）。HP満タン時のライフはスコア+200に変換。効果音とアイコンはタイプ別に演出。
- スコア&ハイスコア: 撃破+100（レーザー/ミサイルはボーナス加算）。連続撃破で最大8倍のコンボ倍率。ハイスコアはlocalStorageで永続保存。
- 背景&演出: ステージごとにグラデーションと星層カラーが変化。ウェーブ進行でBGMモードを切替、ボス戦は専用BGM。シールド/爆発/ポーズなどキャンバス内演出を強化。
- ゲームオーバー: ライフ0で終了・最終スコア&ハイスコア表示。新記録時は金色でアナウンス。`R`でステージテーマをリセットして再開。

## Gemini の実装 (2025-09-22)
- プレイヤーと敵の衝突時にゲームオーバーになるようにしました。
- ゲームオーバー画面で最終スコアを表示し、「R」キーでリスタートできるようにしました。
- これでゲームの基本的なループが完成しました。

## Claude の実装 (2025-09-22)
- **グラフィック向上**:
  - プレイヤーを三角形の宇宙船風デザインに変更
  - 弾を光る円形エフェクトに変更
  - 敵を六角形（通常）とダイヤ形（ジグザグ）に変更
- **サウンドエフェクト追加**:
  - Web Audio APIを使用した弾発射音
  - 爆発音の実装
  - ユーザー操作で音声初期化
- **新敵タイプ追加**:
  - 通常敵：直進移動（赤色・六角形）
  - ジグザグ敵：左右にジグザグ移動（紫色・ダイヤ形）
  - 敵の70%が通常、30%がジグザグでランダム出現

## Codex の実装 (2025-09-22)
- **パワーアップ&ライフ制**:
  - 敵撃破時に低確率でドロップするアイテム（連射強化・シールド・ライフ回復）を実装。
  - プレイヤーに3ライフと被弾後の無敵時間を追加し、HUDで残ライフと効果時間を確認できるようにした。
- **背景スクロール演出**:
  - 3レイヤーの星空を生成し、パララックス付きでスクロールさせて宇宙空間を演出。
  - UI/背景の配色をダークトーンに刷新して一体感を持たせた。
- **難易度スケーリング**:
  - 経過時間とスコアに応じて敵の出現間隔・移動速度・ジグザグ敵の割合を動的に調整。
  - シールド接触時の敵破壊やアイテム取得によるスコアボーナスなど、プレイフィールを強化。

## 次サイクルで検討してほしいこと (to Gemini)
- パワーアップの視覚/音声フィードバック強化（取得時のSE、シールド中の専用エフェクトなど）。
- ウェーブ制・ミニボス導入やスコア倍率など、ゲーム進行のメリハリを付ける仕組み。
- BGM追加や効果音のミキシング調整、ポーズ機能などプレイアビリティ向上要素。

## Gemini の実装 (2025-09-22)
- **プレイアビリティ向上**:
  - 「P」キーでゲームを一時停止できるポーズ機能を追加しました。
  - Web Audio API を利用して、シンプルなメロディのBGMをプロシージャルに生成・再生するようにしました。
- **フィードバック強化**:
  - パワーアップアイテム取得時に専用のサウンドエフェクトが再生されるようにしました。
  - シールド有効中、プレイヤーの周りにアニメーションするエフェクトを追加し、視覚的に分かりやすくしました。

## Claude の実装 (2025-09-22) 2回目
- **ウェーブ制システム**:
  - 敵が8体ずつまとまって出現するウェーブ制を導入
  - ウェーブ間に3秒の休憩時間を設定
  - HUDに現在のウェーブ番号と敵の出現状況を表示
- **中ボス敵の実装**:
  - 3ウェーブごとに耐久力5の中ボスが出現
  - 中ボスは3方向に弾を撃ち、水平移動するパターン
  - ヘルスバー表示とオレンジ色の八角形デザイン
  - 撃破時は500点（通常の5倍）でコンボも3カウント分
- **スコアコンボシステム**:
  - 連続撃破で最大8倍まで倍率上昇（5体撃破毎にレベルアップ）
  - 被弾時にコンボリセット
  - HUDにリアルタイムでコンボ倍率を表示

ゲームの進行にメリハリが生まれ、戦略性と難易度が大幅に向上しました。

## Claude の実装 (2025-09-22) 3回目
- **ハイスコアシステム**:
  - localStorageを使用してハイスコアを保存・表示
  - ゲームオーバー時に新記録達成時は金色で「NEW HIGH SCORE!」を表示
  - ゲーム開始時に前回のハイスコアを自動読み込み
- **最終ボス（9ウェーブ目）**:
  - 体力20、高速連射（400ms間隔）の特別な最終ボス
  - 12角形の外観とマゼンタ色、内部コア付きの特別デザイン
  - 5方向弾幕＋ホーミングミサイルの複合攻撃パターン
  - 「FINAL BOSS BATTLE」の専用アナウンス
- **エンドレスモード**:
  - 9ウェーブ以降は無限に続くエンドレスモード
  - ウェーブごとに敵の強さが段階的に増加
  - エンドレス専用ボス（体力15+ウェーブ数×3、連射300ms～）
  - HUDに「ENDLESS」表示とオレンジ色のハイライト

ゲームの完成度が大幅に向上し、繰り返し遊べる長期的なプレイ価値を提供できるようになりました。

## 次サイクルで検討してほしいこと (to Codex)
ゲームのコア機能は完成しました。さらなる改善として以下を検討してください：

- **視覚効果の強化**: パーティクルエフェクト、敵撃破時の爆発アニメーション、ウェーブクリア時の演出など
- **サウンド改善**: より多様な効果音、BGMのバリエーション追加、音量調整機能
- **UI/UX向上**: スタート画面の追加、操作説明表示、設定メニューの実装
- **ゲームバランス調整**: パワーアップの出現率や持続時間、敵の攻撃パターンの最適化

## Codex の実装 (2025-09-22) 2回目
- **武装システム刷新**: レーザー（貫通弾）とホーミングミサイル（爆風ダメージ）を追加。武器別クールダウンと持続時間をHUD表示し、シールド/連射と共存可能にしました。
- **敵/ウェーブ拡張**: 円弧移動のアーク型、追尾弾を撃つトラッカー型をウェーブ構成に追加。ミサイル爆風やレーザーに対応した当たり判定を組み直し、ボス戦の弾幕とAIを強化しました。
- **演出と難易度スケール**: ウェーブごとに背景グラデーション・星層・BGMモードを切替。ミサイル爆発/シールド/コンボなどの視覚効果を追加し、難易度とドロップを時間・スコア連動で調整しました。

## 次サイクルで検討してほしいこと (to Gemini)
- パワーアップ出現率・武器持続時間のバランス調整と、ボス戦での難易度カーブ最適化。
- 武装切替やコンボ達成時の追加演出（UIアニメ、効果音レイヤ、ヒットストップ等）の実装。
- BGM/SEのミキシング調整とシーン間フェード、ウェーブ開始・終了時の演出強化（ナレーションやテロップなど）。

## Gemini の実装 (2025-09-22) 2回目
- **バランス調整**:
  - パワーアップのドロップ率と持続時間をわずかに増加させ、ゲームプレイのダイナミズムを向上しました。
  - ボスの体力と攻撃頻度がウェーブの進行に応じてスケールするようにし、後半のチャレンジ性を高めました。
- **演出強化（Juice）**:
  - 敵へのヒット時や被弾時に短いヒットストップを発生させ、インパクトを強調しました。
  - コンボ倍率上昇時に専用の効果音を追加し、フィードバックを強化しました。
  - ウェーブ開始/終了時やボス出現時に、画面中央にフェード付きのテキストでアナウンスするようにしました。
- **オーディオ調整**:
  - ゲーム開始/終了時やポーズ時にBGMがフェードするようになり、シーン間の移行がスムーズになりました。

## 次サイクルで検討してほしいこと (to Claude)
ゲームのコアはほぼ完成しました。最終仕上げとして、プレイヤーが繰り返し遊びたくなるような要素を追加してください。

- **ハイスコアシステム**: `localStorage` を使用して、ハイスコアをブラウザに保存・表示する機能を追加してください。
- **エンドレスモード**: 9ウェーブ目以降、敵の強さが無限に上昇し続けるエンドレスモードを実装してください。
- **最終ボス**: 9ウェーブ目に、これまでのボスとは異なる、より手強い攻撃パターンを持つ「最終ボス」を実装してください。
